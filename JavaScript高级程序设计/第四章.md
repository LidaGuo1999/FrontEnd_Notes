## 第4章 变量、作用域和内存问题

### 4.1 基本类型和引用类型的值

js中变量可能包含两种类型值：基本类型值（简单的数据段）和引用类型值（多个值构成的对象）。5种基本数据类型都是基本类型值，而引用类型的值是保存在内存中的对象。js不允许直接访问内存中的位置，即不能直接操作对象的内存空间，因此在操作对象时实际上是操作对象的引用，而不是实际的对象。

- 基本类型的值不能添加属性，但是引用类型的值可以添加属性或者方法（类似python中的class）；

- 基本类型值在复制时，会创建一个内存独立的新值（即副本），原始变量的修改不会影响新的变量值。引用类型值在复制时，仅仅是复制了一份指针（即shallow copy），因此原始变量的修改会影响新的变量值；

- 函数参数在传递时都是按值来传递的，无论是基本类型还是引用类型。可以将函数的参数看作局部变量，不过由于引用类型的值就是指针，因此在函数内部操作引用类型参数时，外部对应的对象值也会改变。但是，如果在函数内部给引用类型参数重新赋值给另一个对象，那么外部对应变量所指向的对象不会更改，这也证明了参数是按照值来传递而非按照引用来传递；

- 用typeof操作符可以检测数据类型，而instanceof操作符可以检测引用类型的值（即到底是什么类型的对象，如Array），语法为：

  ```javascript
  result = variable instanceof constructor;
  ```

  当变量是给定引用类型的实例时，就会返回true。所有的引用类型的值都属于Object，因此constructor为Object始终为true。所有的基本类型值都不是对象，因此对它们使用instanceof操作符都会返回false；

### 4.2 执行环境及作用域



